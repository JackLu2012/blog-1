

# 哪些能提高你工作效率的命令

## 创建文件和目录

相信大部分人在第一次使用MacOS时，都会有相同的经历，在目录下右键菜单居然没有新建文件。也许MacOS认为用户没有此需求，所有的文件操作都应该由软件来完成。如果是普通用户，相信都会渐渐适应并喜欢MacOS的设计习惯，但作为研发来说，追求的肯定是最简洁、最有效率的方式，能不使用软件的时候尽量不打开软件，毕竟打开软件的成本比执行命令高的多。

如何创建一个文件？

`touch fileName`

当然还有其他的创建方式，但`touch`是最正规的方式。下面是利用重定向的特性：

```shell
echo "" > test
echo "" >> test
```

将echo的输出重定向到文件test中，`>`和`>>`的区别是前者会重新创建并覆盖文件，后者是追加到文件。

既然是重定向，那么可以使用任何有输出的命令代替echo，如：`tree > test`（这里tree命令可以通过`brew install`来安装）。再扩展一下，假如你自己开发了一个带输出的程序，打印了满屏的输出一闪而过，想要仔细看看输出就可以用重定向到文件。

接下来再看如何创建一个文件夹？

`mkdir folder`

这没有出奇的地方，这里主要说的是创建链级目录的高效命令：

`mkdir -p folder1/folder2/folder3`

在windows和linux下文件的操作习惯区别之一就是文件的扩展名，文件的扩展名设计，其实是为软件设计的，而不是为用户。怎么讲？理论上每种文件的扩展名都对应一款对应的打开软件，为减少文件格式判别而必须打开文件的消耗，将文件格式设计在文件名中，无疑是比较良好的设计。但不幸的是，由于用户也用这种方式来判别文件格式，并可以随意更改文件扩展名，最终导致文件格式判别的混乱。

linux和unix系统下会提供一个文件格式判别命令：

`file fileName`

大家都知道，在linux和unix下一切都是文件，所以对文件夹、设备等均可以执行file命令。file命令针对文本文件，还会输出文本的编码格式。文本编码是计算机中最糟糕的设计，丑陋、混乱、二义性等等，给软件编程带来很大困扰，file命令可以给你减轻些压力。

文件和目录的打开：

好的，你已经习惯了在终端下操作，但工作仅仅依赖终端是不够的，你还需要操作其他软件。假如已经进入一个很深层次的目录，该目录下有个project项目需要用xcode打开，以继续你接下来的工作。这个时候`open`命令就派上用场了。

执行：`open projectName`，系统会用xcode自动打开该项目，这种切换很自然、流畅。同样，针对其他类型文件，系统都会使用默认软件打开。也有的朋友可能像我一样，习惯使用sublime打开文本文件，而不是系统文本编辑器。

可以这样：`sublime txtFile`。当然，首先你要安装sublime，同时使用`ln -s`创建软连接才可以。

打开当前目录？其实就是使用folder软件打开当前目录文件而已：`open .`。

## 文件内容浏览

有很多时候，其实我们只想瞄一下文件内容，可以`cat fileName`一下，文件太大，只想看文件头或文件尾部：`head fileName`、`tail fileName`，想一屏一屏的看：`more fileName`。

这些命令都有很多参数可用，配合参数可以实现你查看文件内容的所有需求（只是针对文本文件）。比如你想实时查看后端服务器的日志文件，不停的tail太累了，可以使用：`tail -f logfile`，当有新的log输出时，会自动同步到屏幕上。

再比如你想将两个文本文件合并成为一个文件：`cat file1 file2 > result`。


## 编辑和查找

我们总会有编辑文件的需求，如果小范围的更改，使用vim可能更合适，不过vim的学习成本稍稍有些高。当然，要是深度学习vim，它几乎可以胜任你的一切编辑需求。简单vim操作还是必要的，因为有种场景必须使用vim：远程登录到服务端进行编辑工作。（你非要说你会emacs就当我没说）

在本地编辑的话，如果不喜欢vim可以使用sublime，是的，我喜欢用它。

下面说说查找，查找分文件查找和内容查找，当初学习linux下的find命令太复杂，以至于学了就忘，就懒得再用了。而我大部分需求只是用来匹配文件名，所以直接用`ls -R | grep fileName`来查找匹配文件，当然也可以用`find . | grep fileName`。如果你有更复杂的文件查找，可能就要深入find命令了。

内容查找就要`grep`命令。你也许也有过这样的需求：在一堆源文件及子目录中，查找哪个文件在哪行调用了某方法。当然也可以把目录拖拽到sublime里进行搜索，或用其他方法，但无论哪种方法，无疑都会打断我当前的工作思路，这个时候可以用这个命令：

`find . | grep ".m$" | xargs grep -n "viewDidLoad"`

我们大致分解一下命令：find 先把当前目录及子目录所有文件列出来，然后交给grep赛选出源代码文件($是正则，匹配文件名尾部)，xargs是把源代码文件目录作为grep的参数进行执行，-n是列出行号，viewDidLoad是我要查的方法名称。

大部分人在学习命令时，一开始都会对比较长的命令望而生畏，我也经历过这个阶段，但事实上，你只需要学习并掌握常用的单个命令，然后进行命令组合就能爆发出强大的能量。这个组合的过程，只需要了解管道概念就成了，有了管道，你可以将命令组合无限延长。


## 网络

你经常会有下载小文件的需求，比如下载一个html网页，一个网页中的图片或js脚本，又或者一个网络上的文件。

你也许会奇怪为什么要下载一个html网页，因为现在的网站经常会有跳转功能，也就是说你用浏览器打开一个url，等你保存该网页的时候，已经是跳转后的内容，想要查看原始内容就不能用浏览器。

之前`wget`比较流行，因为简单，后来`curl`更为流程，因为它即简单，功能也比较强大。至于强大到什么程度，你可以到网上搜索下教程看看，这里篇幅有限，就不详细介绍了。

如果你有下载视频的需求，可以尝试`you-get`，这个命令行软件需要单独安装，系统没有自带。该命令针对优酷等视频下载，好用到令人发指，不过要注意视频版权问题，不要用于非法用途。

远程登录`ssh`掌握是必须的，另外本地与服务器之间文件拷贝使用`scp`命令非常方便。

`ifconfig`查询当前系统ip。`ping`检查网络连通状况。`netstat`查看链接情况。`host`可以查看域名对应ip。

## 总结

最后再来看看几个好用的命令：

`dirname`可以提取文件路径，本身作用不大，但配合其他命令使用就很有价值。如，我想看看react native命令所在目录，以及它所依赖的文件目录结构，如何找呢？使用`which react-native`可以找到该命令路径，但还是软连接，再查看真实路径，一步步才能找到。现在使用组合只需要一步：

`which react-native | xargs dirname | xargs open`

如果想`cd`的话，可以这样：

```shell
cd `which react-native | xargs dirname`
```

命令极大提高你的工作技能，掌握一些常用命令会让你的工作事半功倍，就像常用的一些工具一样。命令也是一种工具，而且是系统自带的，何不快乐的使用呢。



